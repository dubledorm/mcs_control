# README

Административная панель для управления большим количеством специализированных сервисов размещённых в облаке.
Построена на базе ActiveAdmin.
Предоставляет функции администрирования и мониторинга.

## Основной функционал:

* Подключать новые сервисы, создавать и подключать базы данных для них, создавать пльзователей БД, настраивать сетвые ресурсы (nginx) для доступа к новым сервисам. 

* Выделять дополнительные ресурсы для сервисов, а именно порты nginx, автоматически переконфигурировать и перезапускать nginx для подхвата новых конфигураций.

* Осуществлять контроль не пересекаемости ресурсов.

* Предоставлять мониторинг tcp соединений с использованием других микросервисов. Перехватывать передаваемые данные и перенаправлять их на служебные порты. С помощью механизма websocket отображать эти данные online в web интерфейсе пользователя.

* Опрашивать состояния запущенных сервисов с помощью функций API и собирать по статистику, которая потом обрабатывается и представляется с помощью ELK

* Предоставлять сервисные функции, такие как создание и выгрузка бэкапов, сохранение журналов, отслеживание состояния портов ...

* Осуществлять первоначальную настройку при разворачивании на новых площадках, на основе парсинга конфигурационных файлов nginx и баз данных приложений.

## Настройка и запуск
Переменные окружения, которые необходимо выставить перед запуском программы:
Для работы с сервисом ретрансляции:
* RETRANSLATOR_PROGRAM = 'tcp_server'
* RETRANSLATOR_HOST = '127.0.0.1'
* RETRANSLATOR_PORT = '3008'
* REDIS_CLOUD_URL = 'redis://redis:6379'

Для настройки конфигурационных файлов nginx
*  NGCFG_server_address = ['192.168.100.11', '192.168.100.12', '192.168.100.14', '192.168.100.24'] - сервера из которых состоит кластер
*  NGCFG_server_name: = infsphr.info -внешний url облака
*  NGCFG_nginx_server_host = сервер nginx
*  NGCFG_nginx_server_login =  логин с доступом по ssh и запуском sudo без пароля
*  NGCFG_nginx_server_password = пароль
*  NGCFG_nginx_tcp_config_path = /Users/azirumga/Dev/stream - Где лежат настроечные файлы для stream
*  NGCFG_nginx_http_config_path = /Users/azirumga/Dev/http - Где лежат настроечные файлы для tcp
*  NGCFG_http_ports_range = [[30000, 31000]] - диапазон портов для http
*  NGCFG_stream_ports_range = [[31001, 64000]] - диапазон портов для stream 
